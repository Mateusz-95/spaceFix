---
import data from '../../../../data/data';
import Layout from '../../../../layouts/Layout.astro';
import Navigation from '../../../../components/Navigation/Navigation';
import Footer from '../../../../components/Footer/Footer';
import ModelsSection from '../../../../components/ModelsSection/ModelsSection';

export function getStaticPaths() {
  return data
    .filter((item) => item.categories)
    .map(({ slug, categories }) => {
      return categories.map((category) => ({
        params: {
          brand: slug,
          category: category.slug,
        },
        props: {
          models: category.phones.map((phone) => ({ name: phone.name, slug: phone.slug })),
        },
      }));
    })
    .flat();
}

const { models } = Astro.props;
console.log(models);
---

<Layout title="spaceFix">
  <Navigation client:load />
  <ModelsSection headerContent="Wybierz model z serii Samsung Galaxy S" models={models} />;
  <Footer />
</Layout>
