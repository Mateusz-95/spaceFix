---
import data from '../../../data/data';
import Navigation from '../../../components/Navigation/Navigation';
import Layout from '../../../layouts/Layout.astro';
import Footer from '../../../components/Footer/Footer';
import ModelsSection from '../../../components/ModelsSection/ModelsSection';
import SamsungTypes from '../../../components/SamsungTypes/SamsungTypes';
import linkTo from '../../../utility/linkTo';

export function getStaticPaths() {
  return data.map(({ slug, phones, categories, categoryTitle }) => ({
    params: {
      brand: slug,
    },
    props: {
      models: phones ? phones.map((phone) => ({ name: phone.name, slug: phone.slug })) : undefined,
      categories: categories ? categories : undefined,
      categoryTitle,
    },
  }));
}

const { models, categories, categoryTitle } = Astro.props;
const { brand } = Astro.params;
---

<Layout title="spaceFix">
  <Navigation client:load />
  {models && <ModelsSection headerContent="Wybierz model iPhone'a" models={models} prefix={`/offer/${brand}/`} />}
  {categories && <SamsungTypes categoryTitle={categoryTitle} data={categories} prefix={brand} client:load />}
  <Footer />
</Layout>
